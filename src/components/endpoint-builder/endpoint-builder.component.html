<div class="bg-gray-800 rounded-xl shadow-2xl p-6 border border-gray-700">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-2xl font-bold text-gray-200">2. Define Endpoints</h2>
    <button (click)="toggleForm()" class="bg-blue-500/20 hover:bg-blue-500/40 text-blue-300 font-bold py-2 px-4 rounded-lg transition-colors duration-200 text-sm">
      {{ showForm() ? 'Cancel' : 'Add Endpoint' }}
    </button>
  </div>

  @if (showForm()) {
    <div class="bg-gray-900/50 p-4 rounded-lg border border-gray-600 mb-4 space-y-4">
      <div class="flex gap-2">
        <div class="w-1/3">
          <label for="method" class="block text-sm font-medium text-gray-300 mb-1">Method</label>
          <select id="method" [value]="method()" (change)="method.set($event.target.value)" class="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none">
            <option>GET</option>
            <option>POST</option>
            <option>PUT</option>
            <option>DELETE</option>
          </select>
        </div>
        <div class="w-2/3">
          <label for="path" class="block text-sm font-medium text-gray-300 mb-1">Path</label>
          <input id="path" type="text" [value]="path()" (input)="path.set($event.target.value)" placeholder="/users/:id" class="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none">
        </div>
      </div>
      <div>
        <label for="description" class="block text-sm font-medium text-gray-300 mb-1">Description</label>
        <textarea id="description" [value]="description()" (input)="description.set($event.target.value)" rows="3" placeholder="Get a single user by their ID" class="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"></textarea>
      </div>
      <button (click)="saveEndpoint()" [disabled]="!path() || !description()" class="w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white font-bold py-2 px-4 rounded-md transition-colors duration-200">
        Save Endpoint
      </button>
    </div>
  }

  @if (endpoints().length > 0) {
    <div class="space-y-3">
      @for(endpoint of endpoints(); track endpoint.id) {
        <div class="bg-gray-700/50 p-3 rounded-lg flex justify-between items-start">
          <div class="flex-grow">
            <div class="flex items-center gap-3">
              <span class="font-mono font-bold text-sm px-2 py-1 rounded" [class]="{
                'bg-blue-500/50 text-blue-200': endpoint.method === 'GET',
                'bg-green-500/50 text-green-200': endpoint.method === 'POST',
                'bg-yellow-500/50 text-yellow-200': endpoint.method === 'PUT',
                'bg-red-500/50 text-red-200': endpoint.method === 'DELETE'
              }">{{ endpoint.method }}</span>
              <span class="font-mono text-cyan-300">{{ endpoint.path }}</span>
            </div>
            <p class="text-sm text-gray-400 mt-1 ml-1">{{ endpoint.description }}</p>
          </div>
          <button (click)="endpointRemoved.emit(endpoint.id)" class="text-red-400 hover:text-red-300 text-xl font-bold px-2 ml-4 flex-shrink-0">&times;</button>
        </div>
      }
    </div>
  } @else if (!showForm()) {
     <p class="text-gray-500 text-center py-4">No endpoints defined yet. Click "Add Endpoint" to start.</p>
  }
</div>
